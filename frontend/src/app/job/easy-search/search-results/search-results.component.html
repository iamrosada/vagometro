<main class="flex flex-col items-center justify-center p-4 w-full">
  <section class="flex flex-col lg:flex-row gap-4 my-4 w-full lg:w-1/2">
    <button
      class="btn flex-1"
      (click)="setDataType('jobs')"
      [ngClass]="{
        'btn-primary': selectedDataType === 'jobs',
        'btn-outline': selectedDataType !== 'jobs'
      }"
    >
      <i class="bx bxs-briefcase"></i>
      <span> Vagas </span>
    </button>
    <button
      class="btn flex-1"
      (click)="setDataType('stats')"
      [ngClass]="{
        'btn-primary': selectedDataType === 'stats',
        'btn-outline': selectedDataType !== 'stats'
      }"
    >
      <i class="bx bx-stats"></i>
      <span> An√°lise </span>
    </button>
    <button [routerLink]="['/busca-facil/dados']" class="btn flex-1">
      <i class="bx bxs-edit"></i>
      <span> Editar busca </span>
    </button>
  </section>

  <ng-container *ngIf="selectedDataType === 'jobs'">
    <section class="w-full lg:w-1/2">
      <div class="card card-bordered card-compact bg-base-300">
        <div class="card-title justify-between p-4">
          <h1>Vagas encontradas</h1>
          <span>Total: {{ ((jobs$ | async) || []).length }} vagas</span>
        </div>

        <div class="card-body overflow-y-hidden">
          <vgm-job-list [jobs$]="jobs$" [sortBy]="'matchPercentage'"></vgm-job-list>
        </div>
      </div>
    </section>
  </ng-container>

  <ng-container *ngIf="selectedDataType === 'stats'">
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-4 w-full">
      <div class="flex item items-center justify-center lg:col-span-2">
        <vgm-publication-chart [jobs$]="jobs$"></vgm-publication-chart>
      </div>

      <vgm-job-postings-comparison [jobs$]="jobs$"></vgm-job-postings-comparison>

      <vgm-rank [rankType]="rankTypes.experience" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.technology" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.workplace" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.companies" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.contractTypes" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.education" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.languages" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.cities" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.months" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.inclusion" [jobs$]="jobs$"></vgm-rank>

      <vgm-rank [rankType]="rankTypes.certification" [jobs$]="jobs$"></vgm-rank>
    </section>
  </ng-container>
</main>
